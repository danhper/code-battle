<h1><%= @quest.title %></h1>
<p><%= @quest.description %></p>


<% if user_signed_in? %>
  <div class="code-actions">
    <% if @code %>
      <%= link_to 'Show my spell', quest_code_path(@quest, @code) %>
    <% else %>
      <%= link_to 'Cast a spell', new_quest_code_path(@quest) %>
    <% end %>
  </div>
<% end %>

<div class="codes">
  <% if @codes.empty? %>
    No spell casted for this quest.
  <% else %>
    <%= render partial: 'codes/code_line', collection: @codes, as: :code, locals: { fields: [:author, :guild] } %>
    <%= will_paginate @codes %>
  <% end %>
</div>

