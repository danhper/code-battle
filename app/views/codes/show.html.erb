<h2>code</h2>

<%= render 'quests/short', quest: @quest %>

<pre>
  <%= @code.source %>
</pre>

<% if @is_owner %>
  <%= link_to 'Edit code', edit_quest_code_path(@quest, @code) %>
  <%= link_to 'Delete code', quest_code_path(@quest, @code), method: :delete, confirm: true %>
<% else %>
  <%= render 'codes/like', code: @code %>
<% end %>


<div id="comments">
  <% if user_signed_in? %>
    <%= render 'comments/form' %>
  <% end %>

  <div class="container">

  </div>

</div>

<% content_for :javascript do %>
  <script>
    var comments = new Dmtc.Collections.Comments(<%= raw @code.comments.to_json %>);
    new Dmtc.Views.NewComment({ codeId: <%= @code.id %>, comments: comments });
    new Dmtc.Views.CommentsIndex({ collection: comments });
  </script>
<% end %>
